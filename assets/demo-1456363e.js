import{d as k,b as A,a as B,r as E,_ as $,y as w,o as i,x as n,w as s,k as o,j as e,B as g,g as m,f as _,z as d,C as l,l as h,D,E as z}from"./index-234e01e2.js";const U=k({setup(){var t;const r=A(),a=B(),c=E(((t=a.userInfo)==null?void 0:t.roles)||"admin"),v=y=>a.userInfo[y],f=E(0);return{key:f,roles:c,userInfo:v,switchUser:y=>{c.value=y,a.vToken=y+"-token",a.tags.splice(1),r.getRoutes().forEach(p=>{p.meta&&p.meta.id&&r.removeRoute(p.name)}),a.userInfoRequest().then(()=>{f.value+=1})}}}}),I={style:{color:"var(--color-primary)"}},N=o("div",{class:"tipBox"},[e(" 单个验证（指令） "),o("div",{style:{"font-size":"13px",color:"var(--el-color-info)"}},` v-permission="['admin']" `)],-1),R=o("div",{class:"tipBox"},[e(" 多个验证（指令，满足一个显示） "),o("div",{style:{"font-size":"13px",color:"var(--el-color-info)"}},` v-permission="['admin','ordinary']" `)],-1),S=o("div",{class:"tipBox"},[e(" 多个验证（指令，满足全部显示） "),o("div",{style:{"font-size":"13px",color:"var(--el-color-info)"}},` v-permission:all="['admin','ordinary']" `)],-1),V=o("div",{class:"tipBox"},[e(" 单个验证（函数） "),o("div",{style:{"font-size":"13px",color:"var(--el-color-info)"}},` v-if="$permission(['admin'])" `)],-1),b=o("div",{class:"tipBox"},[e(" 多个验证（函数，满足一个显示） "),o("div",{style:{"font-size":"13px",color:"var(--el-color-info)"}},` v-if="$permission(['admin','ordinary'])" `)],-1),T=o("div",{class:"tipBox"},[e(" 多个验证（函数，满足全部显示） "),o("div",{style:{"font-size":"13px",color:"var(--el-color-info)"}},` v-if="$permission(['admin','ordinary'])" `)],-1);function j(r,a,c,v,f,C){const t=h,y=D,p=z,u=w("permission");return i(),n(p,{shadow:r.defaultData.cardShadow},{header:s(()=>[o("span",null,[e("当前用户权限："),o("span",I,g(r.userInfo("roles")),1)]),m(y,{style:{float:"right"}},{default:s(()=>[m(t,{type:r.roles.includes("admin")?"primary":"default",onClick:a[0]||(a[0]=F=>r.switchUser("admin"))},{default:s(()=>[e("admin")]),_:1},8,["type"]),m(t,{type:r.roles.includes("ordinary")?"primary":"default",onClick:a[1]||(a[1]=F=>r.switchUser("ordinary"))},{default:s(()=>[e("ordinary")]),_:1},8,["type"]),m(t,{type:r.roles.includes("test")?"primary":"default",onClick:a[2]||(a[2]=F=>r.switchUser("test"))},{default:s(()=>[e("test")]),_:1},8,["type"])]),_:1})]),default:s(()=>[(i(),_("div",{class:"grid grid-c-3",key:r.key},[o("div",null,[N,d((i(),n(t,{type:"primary"},{default:s(()=>[e("['admin']")]),_:1})),[[u,["admin"]]]),d((i(),n(t,{type:"success"},{default:s(()=>[e("['ordinary']")]),_:1})),[[u,["ordinary"]]]),d((i(),n(t,{type:"warning"},{default:s(()=>[e(`"'test'"`)]),_:1})),[[u,"test"]])]),o("div",null,[R,d((i(),n(t,{type:"primary"},{default:s(()=>[e("['admin','ordinary']")]),_:1})),[[u,["admin","ordinary"]]]),d((i(),n(t,{type:"success"},{default:s(()=>[e("['ordinary','test']")]),_:1})),[[u,["ordinary","test"]]]),d((i(),n(t,{type:"warning"},{default:s(()=>[e("['admin','test']")]),_:1})),[[u,["admin","test"]]])]),o("div",null,[S,d((i(),n(t,{type:"primary"},{default:s(()=>[e("['admin','ordinary']")]),_:1})),[[u,["admin","ordinary"],"all"]]),d((i(),n(t,{type:"success"},{default:s(()=>[e("['ordinary','test']")]),_:1})),[[u,["ordinary","test"],"all"]]),d((i(),n(t,{type:"warning"},{default:s(()=>[e("['admin','test']")]),_:1})),[[u,["admin","test"],"all"]])])])),(i(),_("div",{class:"grid grid-c-3",key:r.key+1},[o("div",null,[V,r.$permission(["admin"])?(i(),n(t,{key:0,type:"primary"},{default:s(()=>[e("['admin']")]),_:1})):l("",!0),r.$permission(["ordinary"])?(i(),n(t,{key:1,type:"success"},{default:s(()=>[e("['ordinary']")]),_:1})):l("",!0),r.$permission("test")?(i(),n(t,{key:2,type:"warning"},{default:s(()=>[e(`"'test'"`)]),_:1})):l("",!0)]),o("div",null,[b,r.$permission(["admin","ordinary"])?(i(),n(t,{key:0,type:"primary"},{default:s(()=>[e("['admin','ordinary']")]),_:1})):l("",!0),r.$permission(["ordinary","test"])?(i(),n(t,{key:1,type:"success"},{default:s(()=>[e("['ordinary','test']")]),_:1})):l("",!0),r.$permission(["admin","test"])?(i(),n(t,{key:2,type:"warning"},{default:s(()=>[e("['admin','test']")]),_:1})):l("",!0)]),o("div",null,[T,r.$permission(["admin","ordinary"],!0)?(i(),n(t,{key:0,type:"primary"},{default:s(()=>[e("['admin','ordinary']")]),_:1})):l("",!0),r.$permission(["ordinary","test"],!0)?(i(),n(t,{key:1,type:"success"},{default:s(()=>[e("['ordinary','test']")]),_:1})):l("",!0),r.$permission(["admin","test"],!0)?(i(),n(t,{key:2,type:"warning"},{default:s(()=>[e("['admin','test']")]),_:1})):l("",!0)])]))]),_:1},8,["shadow"])}const G=$(U,[["render",j]]);export{G as default};
