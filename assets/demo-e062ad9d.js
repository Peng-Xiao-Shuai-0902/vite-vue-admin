import{d as h,B as A,u as B,l as _,_ as C,c4 as $,o as i,h as a,w as s,b as o,p as e,t as w,i as c,a as k,bc as u,a1 as d,I as g,ac as D,E as z}from"./index-22d7fef2.js";const I=h({setup(r,{emit:l}){var m;const f=A(),p=B(),v=((m=p.state.user.userInfo)==null?void 0:m.name)||_("admin"),F=n=>p.state.user.userInfo[n],t=_(0);return{key:t,checket:v,userInfo:F,switchUser:n=>{v.value=n,p.commit("setToken",n+"-token"),p.commit("tagsRefresh"),f.getRoutes().forEach(y=>{y.meta&&y.meta.id&&f.removeRoute(y.name)}),p.dispatch("userInfo").then(()=>{t.value+=1})}}}}),U={style:{color:"var(--color-primary)"}},b=o("div",{class:"tipBox"},[e(" 单个验证（指令） "),o("div",{style:{"font-size":"13px",color:"var(--el-color-info)"}},` v-permission="['admin']" `)],-1),N=o("div",{class:"tipBox"},[e(" 多个验证（指令，满足一个显示） "),o("div",{style:{"font-size":"13px",color:"var(--el-color-info)"}},` v-permission="['admin','ordinary']" `)],-1),R=o("div",{class:"tipBox"},[e(" 多个验证（指令，满足全部显示） "),o("div",{style:{"font-size":"13px",color:"var(--el-color-info)"}},` v-permission:all="['admin','ordinary']" `)],-1),V=o("div",{class:"tipBox"},[e(" 单个验证（函数） "),o("div",{style:{"font-size":"13px",color:"var(--el-color-info)"}},` v-if="$permission(['admin'])" `)],-1),S=o("div",{class:"tipBox"},[e(" 多个验证（函数，满足一个显示） "),o("div",{style:{"font-size":"13px",color:"var(--el-color-info)"}},` v-if="$permission(['admin','ordinary'])" `)],-1),T=o("div",{class:"tipBox"},[e(" 多个验证（函数，满足全部显示） "),o("div",{style:{"font-size":"13px",color:"var(--el-color-info)"}},` v-if="$permission(['admin','ordinary'])" `)],-1);function G(r,l,f,p,v,F){const t=g,E=D,m=z,n=$("permission");return i(),a(m,{shadow:r.defaultData.cardShadow},{header:s(()=>[o("span",null,[e("当前用户权限："),o("span",U,w(r.userInfo("roles")),1)]),c(E,{style:{float:"right"}},{default:s(()=>[c(t,{type:r.checket=="admin"?"primary":"default",onClick:l[0]||(l[0]=y=>r.switchUser("admin"))},{default:s(()=>[e("admin")]),_:1},8,["type"]),c(t,{type:r.checket=="ordinary"?"primary":"default",onClick:l[1]||(l[1]=y=>r.switchUser("ordinary"))},{default:s(()=>[e("ordinary")]),_:1},8,["type"]),c(t,{type:r.checket=="test"?"primary":"default",onClick:l[2]||(l[2]=y=>r.switchUser("test"))},{default:s(()=>[e("test")]),_:1},8,["type"])]),_:1})]),default:s(()=>[(i(),k("div",{class:"grid grid-c-3",key:r.key},[o("div",null,[b,u((i(),a(t,{type:"primary"},{default:s(()=>[e("['admin']")]),_:1})),[[n,["admin"]]]),u((i(),a(t,{type:"success"},{default:s(()=>[e("['ordinary']")]),_:1})),[[n,["ordinary"]]]),u((i(),a(t,{type:"warning"},{default:s(()=>[e(`"'test'"`)]),_:1})),[[n,"test"]])]),o("div",null,[N,u((i(),a(t,{type:"primary"},{default:s(()=>[e("['admin','ordinary']")]),_:1})),[[n,["admin","ordinary"]]]),u((i(),a(t,{type:"success"},{default:s(()=>[e("['ordinary','test']")]),_:1})),[[n,["ordinary","test"]]]),u((i(),a(t,{type:"warning"},{default:s(()=>[e("['admin','test']")]),_:1})),[[n,["admin","test"]]])]),o("div",null,[R,u((i(),a(t,{type:"primary"},{default:s(()=>[e("['admin','ordinary']")]),_:1})),[[n,["admin","ordinary"],"all"]]),u((i(),a(t,{type:"success"},{default:s(()=>[e("['ordinary','test']")]),_:1})),[[n,["ordinary","test"],"all"]]),u((i(),a(t,{type:"warning"},{default:s(()=>[e("['admin','test']")]),_:1})),[[n,["admin","test"],"all"]])])])),(i(),k("div",{class:"grid grid-c-3",key:r.key+1},[o("div",null,[V,r.$permission(["admin"])?(i(),a(t,{key:0,type:"primary"},{default:s(()=>[e("['admin']")]),_:1})):d("",!0),r.$permission(["ordinary"])?(i(),a(t,{key:1,type:"success"},{default:s(()=>[e("['ordinary']")]),_:1})):d("",!0),r.$permission("test")?(i(),a(t,{key:2,type:"warning"},{default:s(()=>[e(`"'test'"`)]),_:1})):d("",!0)]),o("div",null,[S,r.$permission(["admin","ordinary"])?(i(),a(t,{key:0,type:"primary"},{default:s(()=>[e("['admin','ordinary']")]),_:1})):d("",!0),r.$permission(["ordinary","test"])?(i(),a(t,{key:1,type:"success"},{default:s(()=>[e("['ordinary','test']")]),_:1})):d("",!0),r.$permission(["admin","test"])?(i(),a(t,{key:2,type:"warning"},{default:s(()=>[e("['admin','test']")]),_:1})):d("",!0)]),o("div",null,[T,r.$permission(["admin","ordinary"],!0)?(i(),a(t,{key:0,type:"primary"},{default:s(()=>[e("['admin','ordinary']")]),_:1})):d("",!0),r.$permission(["ordinary","test"],!0)?(i(),a(t,{key:1,type:"success"},{default:s(()=>[e("['ordinary','test']")]),_:1})):d("",!0),r.$permission(["admin","test"],!0)?(i(),a(t,{key:2,type:"warning"},{default:s(()=>[e("['admin','test']")]),_:1})):d("",!0)])]))]),_:1},8,["shadow"])}const q=C(I,[["render",G]]);export{q as default};
