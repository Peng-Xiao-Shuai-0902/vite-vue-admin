import{_ as g,d as h,S as w,r as _,aj as C,t as S,N as k,o as y,f as v,k as n,a0 as x,a7 as V,s as $,g as r,w as c,v as F,j as E,l as T,V as B,E as N,Q as M,R as j}from"./index-8e4d02bc.js";const D=h({props:{modelValue:{type:String,default:""},slotStyle:{type:Object,default:()=>{}},height:{type:[String,Number],default:500},width:{type:[String,Number],default:500},plugins:{type:[String,Array],default:"lists fullscreen emoticons autosave image table wordcount emoticons"},toolbar:{type:[String,Array],default:"bold italic underline strikethrough restoredraft image fullscreen emoticons | fontsizeselect | forecolor backcolor | alignleft aligncenter alignright alignjustify|bullist numlist |outdent indent blockquote | undo redo | removeformat"},url:{required:!0,type:String,default:""},data:{type:Array,default:()=>[{key:"type",value:0}]}},emits:["update:modelValue"],setup(e,t){w(()=>{m(e.height)});let l=_(!1),a="vue-tinymce-"+ +new Date;C(()=>{l.value&&e.modelValue!=""&&S(()=>{window.tinymce.get(a).setContent(e.modelValue)})});function s(){t.emit("update:modelValue",window.tinymce.get(a).getContent())}function m(){var o;(o=window.tinymce)==null||o.init({selector:`#${a}`,branding:!1,language_url:"/static/zh_CN.js",language:"zh_CN",height:e.height,width:e.width,plugins:e.plugins,toolbar:e.toolbar,content_style:"div,p{margin:5px 0;}img{max-width:100%;}*::-webkit-scrollbar{width:6px;height:6px;background:transparent;}*::-webkit-scrollbar-thumb{border-radius: 3px;background: #bac3d9;}",images_upload_handler:(d,p,f)=>{let i=new FormData;i.append("file",d.blob(),d.filename()),e.data.forEach(u=>{i.append(u.key,u.value)}),k.post(e.url,i).then(u=>{u.data.code===200?p(u.data.data.url):f("上传失败")})},init_instance_callback:function(d){l.value=!0}})}return{tinymceId:a,hasInit:l,getContentFun:s}}}),I={class:"tinymce-editor"},z=["id"];function A(e,t,l,a,s,m){return y(),v("div",I,[n("textarea",{class:"tinymce-textarea",id:e.tinymceId},null,8,z),n("div",{onClick:t[0]||(t[0]=(...o)=>e.getContentFun&&e.getContentFun(...o)),style:V(e.slotStyle)},[x(e.$slots,"default")],4)])}const b=g(D,[["render",A]]),H=()=>$({url:"modules/richText"}),q=h({name:"ModulesRichText",components:{tinyMce:b},setup(){let e=_(""),t=_(null);l();function l(){H().then(s=>{e.value=s.data.data})}function a(){console.log("获取富文本数据",e.value)}return{myValue:e,getTinyMceFun:a,scroll:t}}});const L=e=>(M("data-v-5e174de8"),e=e(),j(),e),R={class:"app-container"},J={class:"operate-container"},O=L(()=>n("span",null,"富文本编辑器",-1)),Q={class:"lineTinyBox"},U={class:"phoneBox"},Z=["innerHTML"];function G(e,t,l,a,s,m){const o=T,d=b,p=B,f=N;return y(),v("div",R,[r(f,{shadow:e.defaultData.cardShadow},{default:c(()=>[n("div",J,[n("div",null,[n("i",{class:F([e.defaultData.iconfont,"viteZJ-fuwenben"]),style:{"margin-right":"5px"}},null,2),O])]),n("div",Q,[r(d,{width:"100%",modelValue:e.myValue,"onUpdate:modelValue":t[1]||(t[1]=i=>e.myValue=i),height:667,url:"图片路径",ref:"tinymce",slotStyle:{display:"flex",justifyContent:"center",padding:"10px 0 0"}},{default:c(()=>[r(o,{type:"primary",onClick:t[0]||(t[0]=i=>e.getTinyMceFun())},{default:c(()=>[E(" 确认 ")]),_:1})]),_:1},8,["modelValue"]),n("div",U,[r(p,{style:{height:"667px"},class:"vHtml",ref:"scroll"},{default:c(()=>[n("div",{innerHTML:e.myValue},null,8,Z)]),_:1},512)])])]),_:1},8,["shadow"])])}const P=g(q,[["render",G],["__scopeId","data-v-5e174de8"]]);export{P as default};
