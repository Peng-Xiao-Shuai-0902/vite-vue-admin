import{_,d as g,S as b,r as f,a0 as w,t as C,N as S,o as h,f as y,k as n,a5 as k,a2 as x,s as V,g as u,w as r,v as $,j as F,l as E,V as T,E as B,Q as N,R as M}from"./index-e341999d.js";const D=g({props:{modelValue:{type:String,default:""},slotStyle:{type:Object,default:()=>{}},height:{type:[String,Number],default:500},width:{type:[String,Number],default:500},plugins:{type:[String,Array],default:"lists fullscreen emoticons autosave image table wordcount emoticons"},toolbar:{type:[String,Array],default:"bold italic underline strikethrough restoredraft image fullscreen emoticons | fontsizeselect | forecolor backcolor | alignleft aligncenter alignright alignjustify|bullist numlist |outdent indent blockquote | undo redo | removeformat"},url:{required:!0,type:String,default:""},data:{type:Array,default:()=>[{key:"type",value:0}]}},emits:["update:modelValue"],setup(e,t){b(()=>{c(e.height)});let o=f(!1),a="vue-tinymce-"+ +new Date;w(()=>{o.value&&e.modelValue!=""&&C(()=>{window.tinymce.get(a).setContent(e.modelValue)})});function s(){t.emit("update:modelValue",window.tinymce.get(a).getContent())}function c(){window.tinymce.init({selector:`#${a}`,branding:!1,language_url:"/static/zh_CN.js",language:"zh_CN",height:e.height,width:e.width,plugins:e.plugins,toolbar:e.toolbar,content_style:"div,p{margin:5px 0;}img{max-width:100%;}*::-webkit-scrollbar{width:6px;height:6px;background:transparent;}*::-webkit-scrollbar-thumb{border-radius: 3px;background: #bac3d9;}",images_upload_handler:(i,m,p)=>{let d=new FormData;d.append("file",i.blob(),i.filename()),e.data.forEach(l=>{d.append(l.key,l.value)}),S.post(e.url,d).then(l=>{l.data.code===200?m(l.data.data.url):p("上传失败")})},init_instance_callback:function(i){o.value=!0}})}return{tinymceId:a,hasInit:o,getContentFun:s}}}),I={class:"tinymce-editor"},j=["id"];function z(e,t,o,a,s,c){return h(),y("div",I,[n("textarea",{class:"tinymce-textarea",id:e.tinymceId},null,8,j),n("div",{onClick:t[0]||(t[0]=(...i)=>e.getContentFun&&e.getContentFun(...i)),style:x(e.slotStyle)},[k(e.$slots,"default")],4)])}const v=_(D,[["render",z]]),A=()=>V({url:"modules/richText"}),H=g({name:"ModulesRichText",components:{tinyMce:v},setup(){let e=f(""),t=f(null);o();function o(){A().then(s=>{e.value=s.data})}function a(){console.log("获取富文本数据",e.value)}return{myValue:e,getTinyMceFun:a,scroll:t}}});const q=e=>(N("data-v-612d2230"),e=e(),M(),e),L={class:"app-container"},R={class:"operate-container"},J=q(()=>n("span",null,"富文本编辑器",-1)),O={class:"lineTinyBox"},Q={class:"phoneBox"},U=["innerHTML"];function Z(e,t,o,a,s,c){const i=E,m=v,p=T,d=B;return h(),y("div",L,[u(d,{shadow:e.defaultData.cardShadow},{default:r(()=>[n("div",R,[n("div",null,[n("i",{class:$([e.defaultData.iconfont,"viteZJ-fuwenben"]),style:{"margin-right":"5px"}},null,2),J])]),n("div",O,[u(m,{width:"100%",modelValue:e.myValue,"onUpdate:modelValue":t[1]||(t[1]=l=>e.myValue=l),height:667,url:"图片路径",ref:"tinymce",slotStyle:{display:"flex",justifyContent:"center",padding:"10px 0 0"}},{default:r(()=>[u(i,{type:"primary",onClick:t[0]||(t[0]=l=>e.getTinyMceFun())},{default:r(()=>[F(" 确认 ")]),_:1})]),_:1},8,["modelValue"]),n("div",Q,[u(p,{style:{height:"667px"},class:"vHtml",ref:"scroll"},{default:r(()=>[n("div",{innerHTML:e.myValue},null,8,U)]),_:1},512)])])]),_:1},8,["shadow"])])}const K=_(H,[["render",Z],["__scopeId","data-v-612d2230"]]);export{K as default};
