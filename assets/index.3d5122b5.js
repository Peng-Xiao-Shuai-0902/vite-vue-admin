import{_ as E,J as S,r as o,b as m,c,k as u,e as r,j as n,t as C,F as g,l as v,q as A,y as x,z as B,x as z,d as U,v as j}from"./vendor.4a074574.js";import{m as k}from"./index.ece435eb.js";const V={VITE_BASE_URL:"https://peng-xiao-shuai-0902.github.io/vite-vue-admin/",VITE_MOCK:"true",VITE_TIMEOUT:"10000",VITE_OUTPUT_DIR:"dist",BASE_URL:"/vite-vue-admin/",MODE:"production",DEV:!1,PROD:!0},I={name:"allUpload",props:{modelValue:String,limit:{default:1,type:Number},tipLabel:{default:"\u652F\u6301\u683C\u5F0Fjpg\u3001jpeg\u3001png",type:String},fileType:{default:0,type:[Number,String]},type:{default:0,type:[Number,String]},fileSize:{type:Number,default:()=>50},disabled:{type:Boolean,default:!1},suffixStr:{type:[Array,String],default:()=>["jpg\u3001jpeg\u3001png","mp4\u3001ogg\u3001flv\u3001avi\u3001wmv\u3001rmvb\u3001mov","pdf\u3001txt\u3001doc\u3001docx\u3001excel\u3001ppt"]}},data(){return{icon:"",imgArr:[],nameArr:[],deleteUrl:V.VITE_BASE_URL+"admin/file/delete",uploadPercent:0,percentFlag:!1,multiple:!1,uploadUrl:V.VITE_BASE_URL+k}},emits:["update:modelValue"],methods:{onError(e,l){console.log(e,l),this.$message({message:"\u4E0A\u4F20\u5931\u8D25",type:"danger"}),this.percentFlag=!1,this.icon=""},onProgress(e,l){this.icon="el-icon-loading",this.uploadPercent=Number(l.percentage.toFixed(2)),this.percentFlag=!0},beforeUpload(e){if(this.imgArr.length>=this.limit)return this.$message.warning("\u8D85\u51FA\u6700\u5927\u4E0A\u4F20\u6570\u91CF"+this.limit+"\uFF01"),!1;let l=this.fileSize;if(console.log(e.size/1024/1024),l!=""&&e.size/1024/1024>=l)return this.$message({message:"\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7"+this.fileSize+"MB",type:"warning"}),!1;let i=this.fileType!=2?e.type.lastIndexOf("/"):e.name.lastIndexOf("."),p=this.fileType!=2?e.type.substr(i+1,e.type.length):e.name.substr(i+1,e.name.length),t=typeof this.suffixStr=="object"?this.suffixStr[this.fileType]:this.suffixStr;if(console.log(t,t.match(p)),!t.match(p))return this.$message.warning("\u53EA\u80FD\u4E0A\u4F20"+t+"\u7684\u6587\u4EF6"),!1},handleSuccess(e){e.code==200?(this.uploadPercent=100,setTimeout(()=>{this.percentFlag=!1,this.imgArr.push(e.data.url),this.nameArr.push(e.data.name),this.icon="",this.uploadPercent=0,console.log("\u4E0A\u4F20\u6210\u529F",this.imgArr.join(",")),this.$emit("update:modelValue",this.imgArr.join(","))},400)):this.$message.error("\u4E0A\u4F20\u5931\u8D25\uFF01")},onExceed(e){this.$message.warning("\u8D85\u51FA\u6700\u5927\u4E0A\u4F20\u6570\u91CF"+this.limit+"\uFF01")},onRemove(e,l,i){let p=this.imgArr.map(t=>t.substr(t.lastIndexOf("/")+1,t.length));this.imgArr.splice(p.indexOf(e.name),1),this.$emit("update:value",this.imgArr.join(","))},Remove(e){this.imgArr.splice(e,1),this.nameArr.splice(e,1),this.$refs.upload.uploadFiles.splice(e,1),this.$emit("update:modelValue",this.imgArr.join(",")),this.$message.success("\u5220\u9664\u6210\u529F\uFF01")},flieEcho(e){if(this.fileType!=2)return;let l=e.substr(e.lastIndexOf("/")+1,e.length);this.$nextTick(()=>{this.$refs.upload.uploadFiles=S([{name:l,percentage:100,status:"success"}])})},clearFiles(){}},watch:{modelValue:{handler(e,l){if(typeof e=="string"&&e){if(this.flieEcho(e),e!=""){this.imgArr=e.split(",");for(let i of this.imgArr)this.flieEcho(i)}}else this.imgArr=[],this.imgArr.length==0&&this.$refs.upload&&(this.$refs.upload.uploadFiles=[])},immediate:!0}}},L={style:{display:"flex"}},R=z("\u4E0A\u4F20"),D={class:"el-upload__tip"},N={class:"imgArr"},O=["onClick"],P=["onClick"],M=["src"];function q(e,l,i,p,t,a){const F=o("el-button"),_=o("el-upload"),f=o("el-image"),y=o("el-progress");return m(),c("div",null,[u("div",L,[r(_,{class:"upload-demo",ref:"upload","on-progress":a.onProgress,"show-file-list":i.fileType==2,"on-success":a.handleSuccess,"on-exceed":a.onExceed,"on-error":a.onError,"on-remove":a.onRemove,limit:i.limit,multiple:i.limit>1,action:t.uploadUrl,"before-upload":a.beforeUpload,disabled:t.icon!=""||i.disabled},{tip:n(()=>[u("div",D,C(i.tipLabel?i.tipLabel:"\u652F\u6301\u683C\u5F0F"+i.suffixStr[i.fileType]),1)]),default:n(()=>[r(F,{icon:t.icon,type:"primary",disabled:t.icon!=""},{default:n(()=>[R]),_:1},8,["icon","disabled"])]),_:1},8,["on-progress","show-file-list","on-success","on-exceed","on-error","on-remove","limit","multiple","action","before-upload","disabled"])]),u("div",N,[t.imgArr.length!=0&&i.fileType==0?(m(!0),c(g,{key:0},v(t.imgArr,(h,d)=>(m(),c("div",{class:"item",key:d},[u("i",{class:"el-icon-circle-close position",onClick:b=>a.Remove(d)},null,8,O),r(f,{lazy:!0,fit:"fill",style:{width:"100px"},src:h,"preview-src-list":[h]},null,8,["src","preview-src-list"])]))),128)):A("",!0),t.imgArr.length!=0&&i.fileType==1?(m(!0),c(g,{key:1},v(t.imgArr,(h,d)=>(m(),c("div",{class:"item",key:d},[u("i",{class:"el-icon-circle-close position",onClick:b=>a.Remove(d)},null,8,P),u("video",{src:h,style:{width:"100px",height:"100px"},class:"avatar video-avatar",controls:"controls"}," \u60A8\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u89C6\u9891\u64AD\u653E ",8,M)]))),128)):A("",!0),t.imgArr.length!=0&&i.fileType==2?(m(),c(g,{key:2},[],64)):A("",!0),x(r(y,{type:"circle",width:100,percentage:t.uploadPercent,style:{"margin-top":"7px"}},null,8,["percentage"]),[[B,t.percentFlag]])])])}var J=E(I,[["render",q],["__scopeId","data-v-e177b068"]]);const K=U({components:{uploadFilesCopy:J},setup(){return{currentFrom:S({image:"http://www.aiiup.cn/uploads/20190821/1-1Z115223503326.jpg",limit:1,fileType:0,fileSize:1,suffixStr:"jpg\u3001jpeg\u3001png",suffixArr:[{label:"\u56FE\u7247",type:0},{label:"\u89C6\u9891",type:1},{label:"\u6587\u4EF6",type:2}]})}}}),Z={class:"app-container"},G={class:"screenForm"},H={style:{display:"flex","justify-content":"center","margin-top":"20px"}};function Q(e,l,i,p,t,a){const F=o("view-name"),_=o("el-input-number"),f=o("el-form-item"),y=o("el-option"),h=o("el-select"),d=o("el-input"),b=o("el-form"),T=o("upload-files-copy"),w=o("el-card");return m(),c("div",Z,[r(w,{shadow:e.defaultData.cardShadow},{default:n(()=>[r(F),u("div",null,[u("div",null,[r(b,{inline:!0,model:e.currentFrom},{default:n(()=>[u("div",G,[r(f,{label:"\u6700\u5927\u4E0A\u4F20\u6570\u91CF\uFF1A"},{default:n(()=>[r(_,{modelValue:e.currentFrom.limit,"onUpdate:modelValue":l[0]||(l[0]=s=>e.currentFrom.limit=s),placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u4E0A\u4F20\u6570\u91CF",style:{width:"80%"},clearable:""},null,8,["modelValue"])]),_:1}),r(f,{label:"\u4E0A\u4F20\u7C7B\u578B\uFF1A"},{default:n(()=>[r(h,{modelValue:e.currentFrom.fileType,"onUpdate:modelValue":l[1]||(l[1]=s=>e.currentFrom.fileType=s),placeholder:"\u8BF7\u9009\u62E9",style:{width:"80%"}},{default:n(()=>[(m(!0),c(g,null,v(e.currentFrom.suffixArr,s=>(m(),j(y,{key:s.type,label:s.label,value:s.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(f,{label:"\u6700\u5927\u4E0A\u4F20\u6587\u4EF6\u5927\u5C0F\uFF08MB\uFF09\uFF1A"},{default:n(()=>[r(d,{modelValue:e.currentFrom.fileSize,"onUpdate:modelValue":l[2]||(l[2]=s=>e.currentFrom.fileSize=s),placeholder:"\u8BF7\u8F93\u5165\u6700\u5927\u4E0A\u4F20\u6587\u4EF6\u5927\u5C0F",style:{width:"80%"},clearable:""},null,8,["modelValue"])]),_:1}),r(f,{label:"\u4E0A\u4F20"+e.currentFrom.suffixArr[e.currentFrom.fileType].label+"\u7C7B\u578B\uFF08\u3001\uFF09\u9694\u5F00\uFF1A"},{default:n(()=>[r(d,{modelValue:e.currentFrom.suffixStr,"onUpdate:modelValue":l[3]||(l[3]=s=>e.currentFrom.suffixStr=s),placeholder:"\u8BF7\u8F93\u5165\u4E0A\u4F20"+e.currentFrom.suffixArr[e.currentFrom.fileType].label+"\u683C\u5F0F",style:{width:"80%"},clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])])]),_:1},8,["model"])]),u("div",H,[r(T,{modelValue:e.currentFrom.image,"onUpdate:modelValue":l[4]||(l[4]=s=>e.currentFrom.image=s),"fileSize:":e.currentFrom.fileSize,limit:e.currentFrom.limit,fileType:e.currentFrom.fileType,fileSize:e.currentFrom.fileSize,suffixStr:e.currentFrom.suffixStr,tipLabel:"\u6700\u5927\u4E0A\u4F20\u6570\u91CF\u4E3A"+e.currentFrom.limit+"\uFF0C\u53EA\u80FD\u4E0A\u4F20"+e.currentFrom.suffixStr+"\uFF0C\u4E14\u6587\u4EF6\u5927\u5C0F\u4E0D\u8D85\u8FC7"+e.currentFrom.fileSize},null,8,["modelValue","fileSize:","limit","fileType","fileSize","suffixStr","tipLabel"])])])]),_:1},8,["shadow"])])}var Y=E(K,[["render",Q]]);export{Y as default};
