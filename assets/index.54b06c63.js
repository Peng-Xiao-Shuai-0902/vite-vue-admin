import{s as e}from"./index.41a3e251.js";import{d as t,ad as a,y as l,af as n,Q as i,U as o,_ as r,o as d,c as s,i as u,O as c,n as m,r as p,a as g,w as y,h as f,q as h,s as b,I as v}from"./vendor.d1cffd1a.js";const w=t({emits:["update:modelValue"],props:{modelValue:{type:String,default:""},slotStyle:{type:Object,default:()=>{}},height:{type:[String,Number],default:500},width:{type:[String,Number],default:500},plugins:{type:[String,Array],default:"lists fullscreen emoticons autosave image table wordcount emoticons"},toolbar:{type:[String,Array],default:"bold italic underline strikethrough restoredraft image fullscreen emoticons | fontsizeselect | forecolor backcolor | alignleft aligncenter alignright alignjustify|bullist numlist |outdent indent blockquote | undo redo | removeformat"},url:{required:!0,type:String,default:""},data:{type:Array,default:()=>[{key:"type",value:0}]}},setup(e,t){a((()=>{e.height,window.tinymce.init({selector:`#${u}`,branding:!1,language_url:"/static/zh_CN.js",language:"zh_CN",height:e.height,width:e.width,plugins:r,toolbar:d,content_style:"div,p{margin:5px 0;}img{max-width:100%;}*::-webkit-scrollbar{width:6px;height:6px;background:transparent;}*::-webkit-scrollbar-thumb{border-radius: 3px;background: #bac3d9;}",images_upload_handler:(t,a,l)=>{let n=new FormData;n.append("file",t.blob(),t.filename()),e.data.forEach((e=>{n.append(e.key,e.value)})),o.post(e.url,n).then((e=>{200===e.data.code?a(e.data.data.url):l("上传失败")}))},init_instance_callback:function(e){s.value=!0}})}));let r=e.plugins,d=e.toolbar,s=l(!1),u="vue-tinymce-"+ +new Date;return n((()=>{s.value&&""!=e.modelValue&&i((()=>{window.tinymce.get(u).setContent(e.modelValue)}))})),{tinymceId:u,hasInit:s,getContentFun:function(){t.emit("update:modelValue",window.tinymce.get(u).getContent())}}}}),x={class:"tinymce-editor"},_=["id"];const k=t({name:"modulesRichText",components:{tinyMce:r(w,[["render",function(e,t,a,l,n,i){return d(),s("div",x,[u("textarea",{class:"tinymce-textarea",id:e.tinymceId},null,8,_),u("div",{onClick:t[0]||(t[0]=(...t)=>e.getContentFun&&e.getContentFun(...t)),style:m(e.slotStyle)},[c(e.$slots,"default")],4)])}]])},setup(){let t=l(""),a=l(null);return e({url:"modules/richText"}).then((e=>{t.value=e.data})),{myValue:t,getTinyMceFun:function(){console.log("获取富文本数据",t.value)},scroll:a}}}),V={class:"app-container"},C={class:"operate-container"},S=(e=>(h("data-v-2d914d92"),e=e(),b(),e))((()=>u("span",null,"富文本编辑器",-1))),T={class:"lineTinyBox"},j=v(" 确认 "),F={class:"phoneBox"},I=["innerHTML"];var M=r(k,[["render",function(e,t,a,l,n,i){const o=p("el-button"),r=p("tiny-mce"),c=p("el-scrollbar"),m=p("el-card");return d(),s("div",V,[g(m,{shadow:e.defaultData.cardShadow},{default:y((()=>[u("div",C,[u("div",null,[u("i",{class:f([e.defaultData.iconfont,"viteZJ-fuwenben"]),style:{"margin-right":"5px"}},null,2),S])]),u("div",T,[g(r,{width:"100%",modelValue:e.myValue,"onUpdate:modelValue":t[1]||(t[1]=t=>e.myValue=t),height:667,url:"图片路径",ref:"tinymce",slotStyle:{display:"flex",justifyContent:"center",padding:"10px 0 0"}},{default:y((()=>[g(o,{type:"primary",onClick:t[0]||(t[0]=t=>e.getTinyMceFun())},{default:y((()=>[j])),_:1})])),_:1},8,["modelValue"]),u("div",F,[g(c,{style:{height:"667px"},class:"vHtml",ref:"scroll"},{default:y((()=>[u("div",{innerHTML:e.myValue},null,8,I)])),_:1},512)])])])),_:1},8,["shadow"])])}],["__scopeId","data-v-2d914d92"]]);export default M;
