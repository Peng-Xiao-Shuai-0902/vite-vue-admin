var e=Object.defineProperty,l=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(l,t,a)=>t in l?e(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a;import{s as n,a as i}from"./index.ccedf6c5.js";import{d,A as u,y as p,p as c,j as m,r as f,o as h,c as g,a as b,F as v,g as y,i as w,m as F,E as x,a7 as C,D as V}from"./vendor.ad7ee91e.js";const _=[{label:"编号",minWidth:"60",sortable:!0,props:[{prop:"id"}]},{label:"书名",props:[{type:"href",prop:"href",data:{prop:"name",style:{fontWeight:"bold"}}},{text:"热度：",type:"iconfont",prop:"iconfont",data:{class:["viteIcon"],style:{color:"red"}}}]},{label:"封面",width:"120",props:[{type:"image",prop:"image",data:{preview:!0,style:{width:"40px",height:"60px",borderRadius:"5px"}}}]},{label:"类型",width:"100",props:[{prop:"types",filter:[{key:0,value:"玄幻"},{key:1,value:"都市"},{key:2,value:"真实"}]}]},{label:"内容",width:"150",props:[{prop:"text",develop:!0,line:3}]},{label:"评分",width:"150",props:[{prop:"rate",type:"rate",data:{colors:[i.getters.getThemeColor,i.getters.getThemeColor,i.getters.getThemeColor],max:5,allowHalf:!0}}]},{label:"推荐",width:"100",props:[{prop:"recommend",type:"switch",data:{activeColor:i.getters.getThemeColor}}]},{label:"价格",width:"120",props:[{text:"原价：",prop:"oldPrice"},{prop:"price",type:"input",data:{placeholder:"请输入现价"}}]},{label:"更新时间（远程搜索）",sortable:"custom",props:[{prop:"date"}]},{label:"操作",minWidth:"180px",fixed:"right",props:[{type:"btn",data:[{tip:"编辑",type:"info",icon:"el-icon-edit-outline",emit:"update"},{tip:"删除",type:"danger",icon:"el-icon-delete",emit:"remove"}]}]}];var S=d({props:{dialog:{type:Boolean,default:!1},currentForm:{type:Object,default:()=>{}},selectMenuList:{type:Array,default:()=>[]}},emits:["update:currentForm","update:dialog","refresh"],setup(e,l){const t=u("messageBox"),a=u("$message"),r=p({});return{close:()=>{l.emit("update:dialog",!1),l.emit("update:currentForm",{})},uploadForm:r,resetForm:()=>{r.resetFields(),l.emit("update:currentForm",{})},onSubmit:()=>{r.value.validate((r=>{if(!r)return a({message:"验证失败",type:"error",duration:1e3}),!1;t.confirm("是否提交数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{e.currentForm.id?a({message:"修改成功",type:"success",duration:1e3}):setTimeout((()=>{a({message:"提交成功",type:"success",duration:1e3})}),200),setTimeout((()=>{l.emit("refresh",e.currentForm),l.emit("update:dialog",!1)}),200)}))}))},beforeClose:t=>{e.currentForm.id?(l.emit("update:currentForm",{}),t()):t()},rules:{title:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入前端名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],icon:[{required:!0,message:"请输入前端图标",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}]}}}});const O=F();c("data-v-6cec3190");const T={class:"a"},D={class:"grid grid-c-2"},U=x("提交"),k=x("重置");m();const j=O(((e,l,t,a,r,o)=>{const s=f("el-input"),n=f("el-form-item"),i=f("upload-file"),d=f("el-option"),u=f("el-select"),p=f("el-rate"),c=f("el-switch"),m=f("el-button"),F=f("el-form"),x=f("el-drawer");return h(),g(x,{title:e.currentForm.id?"修改":"添加","model-value":e.dialog,direction:"rtl",ref:"drawer","before-close":e.beforeClose,onClose:e.close},{default:O((()=>[b(F,{model:e.currentForm,rules:e.rules,ref:"uploadForm","label-position":"top",style:{padding:"0 20px"},class:"Dform"},{default:O((()=>[b(n,{label:"书名",prop:"name"},{default:O((()=>[b(s,{modelValue:e.currentForm.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.currentForm.name=l)},null,8,["modelValue"])])),_:1}),b(n,{label:"封面",prop:"image"},{default:O((()=>[b(i,{value:e.currentForm.image,"onUpdate:value":l[2]||(l[2]=l=>e.currentForm.image=l),disabled:"",tipLabel:"当前仅为示例，请改成可上传地址"},null,8,["value"])])),_:1}),b(n,{label:"类型",prop:"types"},{default:O((()=>[b(u,{modelValue:e.currentForm.types,"onUpdate:modelValue":l[3]||(l[3]=l=>e.currentForm.types=l),placeholder:"请选择",style:{width:"100%"}},{default:O((()=>[(h(!0),g(v,null,y(e.selectMenuList,(e=>(h(),g(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(n,{label:"内容",prop:"text"},{default:O((()=>[b(s,{type:"textarea",modelValue:e.currentForm.text,"onUpdate:modelValue":l[4]||(l[4]=l=>e.currentForm.text=l),rows:"7"},null,8,["modelValue"])])),_:1}),b(n,{label:"评分",prop:"rate"},{default:O((()=>[b("div",T,[b(p,{modelValue:e.currentForm.rate,"onUpdate:modelValue":l[5]||(l[5]=l=>e.currentForm.rate=l),colors:[e.themeColor,e.themeColor,e.themeColor]},null,8,["modelValue","colors"])])])),_:1}),b(n,{label:"推荐",prop:"recommend"},{default:O((()=>[b(c,{modelValue:e.currentForm.recommend,"onUpdate:modelValue":l[6]||(l[6]=l=>e.currentForm.recommend=l),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1}),b("div",D,[b(n,{label:"原价",prop:"oldPrice"},{default:O((()=>[b(s,{modelValue:e.currentForm.oldPrice,"onUpdate:modelValue":l[7]||(l[7]=l=>e.currentForm.oldPrice=l)},null,8,["modelValue"])])),_:1}),b(n,{label:"现价",prop:"price"},{default:O((()=>[b(s,{modelValue:e.currentForm.price,"onUpdate:modelValue":l[8]||(l[8]=l=>e.currentForm.price=l)},null,8,["modelValue"])])),_:1})]),b(n,null,{default:O((()=>[b(m,{type:"primary",onClick:l[9]||(l[9]=l=>e.onSubmit("menuFrom"))},{default:O((()=>[U])),_:1}),e.currentForm.id?w("",!0):(h(),g(m,{key:0,onClick:l[10]||(l[10]=l=>e.resetForm())},{default:O((()=>[k])),_:1}))])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","model-value","before-close","onClose"])}));S.render=j,S.__scopeId="data-v-6cec3190";var L=d({name:"modulesTable",components:{update:S},setup(){let e=u("$message"),i=C({value:[]}),d=C([{value:0,label:"玄幻"},{value:1,label:"都市"},{value:2,label:"真实"}]);const c=V({listQuery:{pageNum:1,pageSize:10,types:"",name:""},header:_,total:0,list:[]});let m=p(!1),f=V({value:{}});const h=(e,l)=>{var t;i.value=l||[],Object.assign(c.listQuery,e||{}),(t=c.listQuery,n({url:"modules/table",params:t})).then((e=>{c.list=e.data.list,c.total=e.data.total}))};h();const g=l=>{c.list=c.list.filter((e=>-1==l.indexOf(e.id))),e.success("删除成功")};return{operateData:{value:0,operates:[{label:"推荐",value:0},{label:"取消推荐",value:1},{label:"删除",value:2}]},isDialog:m,currentForm:f,selectData:i,selectMenuList:d,powerfulTabledata:c,handleResetSearch:()=>{Object.keys(c.listQuery).forEach(((e,l)=>{-1==["pageNum","pageSize"].indexOf(e)&&(c.listQuery[e]="")}))},handleAddMenu:()=>{m.value=!0},refresh:e=>{if(console.log(e,"refresh"),e.id){let l=c.list.map((e=>e.id)).indexOf(e.id);c.list[l]=e}else c.list.push((n=((e,l)=>{for(var t in l||(l={}))r.call(l,t)&&s(e,t,l[t]);if(a)for(var t of a(l))o.call(l,t)&&s(e,t,l[t]);return e})({},e),i={id:c.list[c.list.length-1].id+1,iconfont:"vitehome-liulanliang",href:"https://gitee.com/abc1612565136/vite-admin"},l(n,t(i)))),console.log(c.list);var n,i},getList:h,handleSwitchChange:(l,t)=>{c.list[t]=l,e.success("修改成功")},handleBatchChange:(l,t,a)=>{switch(t.value){case 0:case 1:c.list.forEach(((e,a)=>{-1!==l.indexOf(e.id)&&(0===t.value?e.recommend=1:e.recommend=0)})),e.success("修改成功");break;case 2:g(l)}},handleUpdate:(e,l)=>{m.value=!0,f.value=V(JSON.parse(JSON.stringify(e))),console.log(e)},handleDelete:(e,l)=>{g([e.id])},handleSortCustom:e=>{console.log("远程搜索",e),c.listQuery[e.prop]=e.order,h()}}}});const Q=F();c("data-v-830e4b18");const B={class:"app-container"},M={class:"operate-container"},P=b("div",null,[b("i",{class:"el-icon-search"}),b("span",null,"筛选搜索")],-1),R=x(" 查询搜索 "),z=x(" 重置 "),N={style:{"margin-top":"15px"}},A={class:"screenForm"},E={class:"operate-container"},I=b("div",null,[b("i",{class:"el-icon-tickets"}),b("span",null,"数据列表")],-1),q=x(" 添加 ");m();const W=Q(((e,l,t,a,r,o)=>{const s=f("el-button"),n=f("el-input"),i=f("el-form-item"),d=f("el-option"),u=f("el-select"),p=f("el-form"),c=f("el-card"),m=f("powerful-table"),w=f("update");return h(),g("div",B,[b(c,{class:"filter-container",style:{marginBottom:"20px"},shadow:e.defaultData.cardShadow},{default:Q((()=>[b("div",M,[P,b("div",null,[b(s,{style:{float:"right"},type:"primary",onClick:l[1]||(l[1]=l=>e.getList())},{default:Q((()=>[R])),_:1}),b(s,{style:{float:"right","margin-right":"15px"},onClick:l[2]||(l[2]=l=>e.handleResetSearch())},{default:Q((()=>[z])),_:1})])]),b("div",N,[b(p,{inline:!0,model:e.powerfulTabledata.listQuery},{default:Q((()=>[b("div",A,[b(i,{label:"书名："},{default:Q((()=>[b(n,{modelValue:e.powerfulTabledata.listQuery.name,"onUpdate:modelValue":l[3]||(l[3]=l=>e.powerfulTabledata.listQuery.name=l),placeholder:"请输入书名",style:{width:"80%"},clearable:""},null,8,["modelValue"])])),_:1}),b(i,{label:"书类型：",prop:"types"},{default:Q((()=>[b(u,{modelValue:e.powerfulTabledata.listQuery.types,"onUpdate:modelValue":l[4]||(l[4]=l=>e.powerfulTabledata.listQuery.types=l),placeholder:"请选择"},{default:Q((()=>[(h(!0),g(v,null,y(e.selectMenuList,(e=>(h(),g(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])])),_:1},8,["model"])])])),_:1},8,["shadow"]),b(c,{shadow:e.defaultData.cardShadow},{default:Q((()=>[b("div",E,[I,b("div",null,[b(s,{type:"primary",class:"btn-add",onClick:l[5]||(l[5]=l=>e.handleAddMenu()),size:"mini"},{default:Q((()=>[q])),_:1})])]),b("div",null,[b(m,{ref:"Table",list:e.powerfulTabledata.list,header:e.powerfulTabledata.header,isSelect:!0,total:e.powerfulTabledata.total,tableName:"Table",operateData:e.operateData,selectData:e.selectData.value,onBatchOperate:e.handleBatchChange,onSizeChange:e.getList,onSwitchChange:e.handleSwitchChange,onUpdate:e.handleUpdate,onRemove:e.handleDelete,onSortCustom:e.handleSortCustom},null,8,["list","header","total","operateData","selectData","onBatchOperate","onSizeChange","onSwitchChange","onUpdate","onRemove","onSortCustom"])])])),_:1},8,["shadow"]),b(w,{dialog:e.isDialog,"onUpdate:dialog":l[6]||(l[6]=l=>e.isDialog=l),currentForm:e.currentForm.value,"onUpdate:currentForm":l[7]||(l[7]=l=>e.currentForm.value=l),selectMenuList:e.selectMenuList,onRefresh:e.refresh},null,8,["dialog","currentForm","selectMenuList","onRefresh"])])}));L.render=W,L.__scopeId="data-v-830e4b18";export default L;
