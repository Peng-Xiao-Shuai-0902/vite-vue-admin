import{d as g,l as u,aY as S,M as $,_ as v,o as C,a as w,b as M,G as k,i as r,w as p,p as m,I as y,f as E,E as U}from"./index-c0b8884f.js";const V=g({props:{modelValue:String,signColor:String,signBgColor:String},emits:["update:modelValue","success"],setup(e,n){let t,s,a,d,l=u(null);const o=u(""),c=u(!1),h="sign"+new Date().getTime();S(()=>{t=document.getElementById(h),t&&(a=t.offsetWidth,d=t.offsetHeight,t.width=a,t.height=d,s=t.getContext("2d"),l.value=s,s.fillStyle=e.signColor||"#fff",s.fillRect(0,0,a,a),s.save(),s.strokeStyle=e.signBgColor||"#000",s.lineWidth=1)});const f=u(!1);return{handleDown:i=>{s.beginPath(),s.moveTo(i.offsetX,i.offsetY),f.value=!0},handleMove:i=>{f.value&&(s.lineTo(i.offsetX,i.offsetY),s.stroke())},handleUp:()=>{f.value=!1},handleClear:()=>{s.clearRect(0,0,a,d)},handleCreateImg:()=>{o.value=t.toDataURL("image/jpeg"),o.value&&($.success("生成图片成功！"),n.emit("update:modelValue",o.value),n.emit("success",o.value))},id:h,ctxRef:l,baseUrl:o,isDialog:c}}}),B={style:{width:"100%",position:"relative"}},D=["id"];function _(e,n,t,s,a,d){const l=y;return C(),w("div",B,[M("canvas",{id:e.id,onMousedown:n[0]||(n[0]=(...o)=>e.handleDown&&e.handleDown(...o)),onMousemove:n[1]||(n[1]=(...o)=>e.handleMove&&e.handleMove(...o)),onMouseup:n[2]||(n[2]=(...o)=>e.handleUp&&e.handleUp(...o)),onMouseleave:n[3]||(n[3]=(...o)=>e.handleUp&&e.handleUp(...o)),style:{width:"100%",height:"400px",border:"1px solid #000"}},null,40,D),k(e.$slots,"default",{ctx:e.ctxRef},()=>[r(l,{type:"primary",onClick:e.handleClear},{default:p(()=>[m("清除画布")]),_:1},8,["onClick"]),r(l,{type:"primary",onClick:e.handleCreateImg},{default:p(()=>[m("生成图片")]),_:1},8,["onClick"])])])}const b=v(V,[["render",_]]),I=g({components:{CanvasSign:b},setup(){return{url:u(""),handleSuccess:t=>{}}}}),R={class:"app-container"};function T(e,n,t,s,a,d){const l=E("canvas-sign"),o=U;return C(),w("div",R,[r(o,{shadow:e.defaultData.cardShadow},{default:p(()=>[r(l,{modelValue:e.url,"onUpdate:modelValue":n[0]||(n[0]=c=>e.url=c),onSuccess:e.handleSuccess},null,8,["modelValue","onSuccess"])]),_:1},8,["shadow"])])}const G=v(I,[["render",T]]);export{G as default};
