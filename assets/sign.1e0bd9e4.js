import{d as e,y as a,Q as l,_ as o,C as t,r as n,o as s,c as d,i,O as u,a as r,w as c,I as h}from"./vendor.d1cffd1a.js";const f=e({props:{modelValue:String,signColor:String,signBgColor:String},emits:["update:modelValue","success"],setup(e,o){let n,s,d,i,u=a(null);const r=a(""),c=a(!1),h="sign"+(new Date).getTime();l((()=>{n=document.getElementById(h),n&&(d=n.offsetWidth,i=n.offsetHeight,n.width=d,n.height=i,s=n.getContext("2d"),u.value=s,s.fillStyle=e.signColor||"#fff",s.fillRect(0,0,d,d),s.save(),s.strokeStyle=e.signBgColor||"#000",s.lineWidth=1)}));const f=a(!1);return{handleDown:e=>{s.beginPath(),s.moveTo(e.offsetX,e.offsetY),f.value=!0},handleMove:e=>{f.value&&(s.lineTo(e.offsetX,e.offsetY),s.stroke())},handleUp:()=>{f.value=!1},handleClear:()=>{s.clearRect(0,0,d,i)},handleCreateImg:()=>{r.value=n.toDataURL("image/jpeg"),r.value&&(t.success("生成图片成功！"),o.emit("update:modelValue",r.value),o.emit("success",r.value))},id:h,ctxRef:u,baseUrl:r,isDialog:c}}}),p={style:{width:"100%",position:"relative"}},g=["id"],m=h("清除画布"),v=h("生成图片");const C=e({components:{CanvasSign:o(f,[["render",function(e,a,l,o,t,h){const f=n("el-button");return s(),d("div",p,[i("canvas",{id:e.id,onMousedown:a[0]||(a[0]=(...a)=>e.handleDown&&e.handleDown(...a)),onMousemove:a[1]||(a[1]=(...a)=>e.handleMove&&e.handleMove(...a)),onMouseup:a[2]||(a[2]=(...a)=>e.handleUp&&e.handleUp(...a)),onMouseleave:a[3]||(a[3]=(...a)=>e.handleUp&&e.handleUp(...a)),style:{width:"100%",height:"400px",border:"1px solid #000"}},null,40,g),u(e.$slots,"default",{ctx:e.ctxRef},(()=>[r(f,{type:"primary",onClick:e.handleClear},{default:c((()=>[m])),_:1},8,["onClick"]),r(f,{type:"primary",onClick:e.handleCreateImg},{default:c((()=>[v])),_:1},8,["onClick"])]))])}]])},setup:(e,{emit:l})=>({url:a(""),handleSuccess:e=>{console.log(e)}})}),w={class:"app-container"};var S=o(C,[["render",function(e,a,l,o,t,i){const u=n("canvas-sign"),h=n("el-card");return s(),d("div",w,[r(h,{shadow:e.defaultData.cardShadow},{default:c((()=>[r(u,{modelValue:e.url,"onUpdate:modelValue":a[0]||(a[0]=a=>e.url=a),onSuccess:e.handleSuccess},null,8,["modelValue","onSuccess"])])),_:1},8,["shadow"])])}]]);export default S;
