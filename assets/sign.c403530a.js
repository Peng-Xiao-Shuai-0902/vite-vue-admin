import{d as g,D as r,R as $,_ as v,i as _,r as f,b as C,c as w,k,P as y,e as i,j as h,x as S}from"./vendor.4a074574.js";const D=g({props:{modelValue:String,signColor:String,signBgColor:String},emits:["update:modelValue","success"],setup(e,n){let t,o,a,d,l=r(null);const s=r(""),c=r(!1),m="sign"+new Date().getTime();$(()=>{t=document.getElementById(m),!!t&&(a=t.offsetWidth,d=t.offsetHeight,t.width=a,t.height=d,o=t.getContext("2d"),l.value=o,o.fillStyle=e.signColor||"#fff",o.fillRect(0,0,a,a),o.save(),o.strokeStyle=e.signBgColor||"#000",o.lineWidth=1)});const p=r(!1);return{handleDown:u=>{o.beginPath(),o.moveTo(u.offsetX,u.offsetY),p.value=!0},handleMove:u=>{p.value&&(o.lineTo(u.offsetX,u.offsetY),o.stroke())},handleUp:()=>{p.value=!1},handleClear:()=>{o.clearRect(0,0,a,d)},handleCreateImg:()=>{s.value=t.toDataURL("image/jpeg"),s.value&&(_.success("\u751F\u6210\u56FE\u7247\u6210\u529F\uFF01"),n.emit("update:modelValue",s.value),n.emit("success",s.value))},id:m,ctxRef:l,baseUrl:s,isDialog:c}}}),M={style:{width:"100%",position:"relative"}},U=["id"],V=S("\u6E05\u9664\u753B\u5E03"),B=S("\u751F\u6210\u56FE\u7247");function F(e,n,t,o,a,d){const l=f("el-button");return C(),w("div",M,[k("canvas",{id:e.id,onMousedown:n[0]||(n[0]=(...s)=>e.handleDown&&e.handleDown(...s)),onMousemove:n[1]||(n[1]=(...s)=>e.handleMove&&e.handleMove(...s)),onMouseup:n[2]||(n[2]=(...s)=>e.handleUp&&e.handleUp(...s)),onMouseleave:n[3]||(n[3]=(...s)=>e.handleUp&&e.handleUp(...s)),style:{width:"100%",height:"400px",border:"1px solid #000"}},null,40,U),y(e.$slots,"default",{ctx:e.ctxRef},()=>[i(l,{type:"primary",onClick:e.handleClear},{default:h(()=>[V]),_:1},8,["onClick"]),i(l,{type:"primary",onClick:e.handleCreateImg},{default:h(()=>[B]),_:1},8,["onClick"])])])}var b=v(D,[["render",F]]);const E=g({components:{CanvasSign:b},setup(e,{emit:n}){return{url:r(""),handleSuccess:a=>{console.log(a)}}}}),R={class:"app-container"};function T(e,n,t,o,a,d){const l=f("canvas-sign"),s=f("el-card");return C(),w("div",R,[i(s,{shadow:e.defaultData.cardShadow},{default:h(()=>[i(l,{modelValue:e.url,"onUpdate:modelValue":n[0]||(n[0]=c=>e.url=c),onSuccess:e.handleSuccess},null,8,["modelValue","onSuccess"])]),_:1},8,["shadow"])])}var Y=v(E,[["render",T]]);export{Y as default};
