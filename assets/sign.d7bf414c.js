import{d as e,D as a,y as l,_ as o,r as t,o as n,c as s,i as d,a9 as i,a as u,w as r,K as c}from"./vendor.305ffdb2.js";var h=e({props:{modelValue:String,signColor:String,signBgColor:String},emits:["update:modelValue","success"],setup(e,t){let n,s,d,i,u=a(null);const r=a(""),c=a(!1),h="sign"+(new Date).getTime();l((()=>{n=document.getElementById(h),d=n.offsetWidth,i=n.offsetHeight,n.width=d,n.height=i,s=n.getContext("2d"),u.value=s,s.fillStyle=e.signColor||"#fff",s.fillRect(0,0,d,d),s.save(),s.strokeStyle=e.signBgColor||"#000",s.lineWidth="1"}));const f=a(!1);return{handleDown:e=>{s.beginPath(),s.moveTo(e.offsetX,e.offsetY),f.value=!0},handleMove:e=>{f.value&&(s.lineTo(e.offsetX,e.offsetY),s.stroke())},handleUp:()=>{f.value=!1},handleClear:e=>{s.clearRect(0,0,d,i)},handleCreateImg:()=>{r.value=n.toDataURL("image/jpeg"),r.value&&(o.success("生成图片成功！"),t.emit("update:modelValue",r.value),t.emit("success",r.value))},id:h,ctxRef:u,baseUrl:r,isDialog:c}}});const f={style:{width:"100%",position:"relative"}},p=["id"],g=c("清除画布"),v=c("生成图片");h.render=function(e,a,l,o,c,h){const m=t("el-button");return n(),s("div",f,[d("canvas",{id:e.id,onMousedown:a[0]||(a[0]=(...a)=>e.handleDown&&e.handleDown(...a)),onMousemove:a[1]||(a[1]=(...a)=>e.handleMove&&e.handleMove(...a)),onMouseup:a[2]||(a[2]=(...a)=>e.handleUp&&e.handleUp(...a)),onMouseleave:a[3]||(a[3]=(...a)=>e.handleUp&&e.handleUp(...a)),style:{width:"100%",height:"400px",border:"1px solid #000"}},null,40,p),i(e.$slots,"default",{ctx:e.ctxRef},(()=>[u(m,{type:"primary",onClick:e.handleClear},{default:r((()=>[g])),_:1},8,["onClick"]),u(m,{type:"primary",onClick:e.handleCreateImg},{default:r((()=>[v])),_:1},8,["onClick"])]))])};var m=e({components:{CanvasSign:h},setup:(e,{emit:l})=>({url:a(""),handleSuccess:e=>{console.log(e)}})});const C={class:"app-container"};m.render=function(e,a,l,o,d,i){const c=t("canvas-sign"),h=t("el-card");return n(),s("div",C,[u(h,{shadow:e.defaultData.cardShadow},{default:r((()=>[u(c,{modelValue:e.url,"onUpdate:modelValue":a[0]||(a[0]=a=>e.url=a),onSuccess:e.handleSuccess},null,8,["modelValue","onSuccess"])])),_:1},8,["shadow"])])};export default m;
